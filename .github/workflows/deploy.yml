name: Deploy to Databricks  

on:  
  workflow_dispatch: 

jobs:  
  deploy:  
    runs-on: ubuntu-latest  

    steps:  
    - name: Checkout code  
      uses: actions/checkout@v2  

    - name: Set up Python  
      uses: actions/setup-python@v2  
      with:  
        python-version: '3.x'  

    - name: Install Databricks CLI  
      run: pip install databricks-cli  

    - name: Configure Databricks CLI  
      run: |  
        databricks configure --token  
      env:  
        DATABRICKS_HOST: 'https://adb-3930579399366806.6.azuredatabricks.net' 
        DATABRICKS_TOKEN: 'dapie624462569ae4bbb5728b1c175c0b59a-3'  

    - name: Deploy to Databricks  
      run: |  
        databricks workspace import-dir . /Workspace/Users/michael.lotfy@skillsoft.com/DatabricksProject  
        databricks apps deploy my-flask-app --source-code-path /Workspace/Users/michael.lotfy@skillsoft.com/DatabricksProject  
