name: Deploy to Databricks  
  
on:  
  workflow_dispatch:  
  
jobs:  
  deploy:  
    runs-on: ubuntu-latest  
  
    steps:  
    - name: Checkout code  
      uses: actions/checkout@v2  
  
    - name: Set up Python  
      uses: actions/setup-python@v2  
      with:  
        python-version: '3.x'  
  
    - name: Install Databricks CLI  
      run: pip install databricks-cli  
  
    - name: Deploy to Databricks  
      env:  
        DATABRICKS_HOST: ${{ secrets.DATABRICKS_HOST }}  
        DATABRICKS_TOKEN: ${{ secrets.DATABRICKS_TOKEN }}  
      run: |  
        # Import directory to Databricks  
        databricks workspace import-dir . /Workspace/Users/michael.lotfy@skillsoft.com/DatabricksProject  
          
        # Optional: Install dependencies if needed  
        pip install -r requirements.txt  
          
        # Deploy the app (assuming the app requires deployment)  
        databricks apps deploy my-flask-app --source-code-path /Workspace/Users/michael.lotfy@skillsoft.com/DatabricksProject  
